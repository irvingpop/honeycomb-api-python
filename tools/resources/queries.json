{
  "tools": [
    {
      "name": "honeycomb_create_query",
      "description": "Creates a new saved query in a dataset that can be reused in boards, analysis, or referenced by ID. Use this to save frequently-used queries, create queries for dashboard panels, or prepare queries for trigger definitions. Requires the dataset slug and query specification including time_range and calculations. Optional annotation_name parameter creates the query with a display name for easier identification in the UI. The query specification supports multiple calculations (unlike triggers which allow only one), filters, breakdowns, orders, havings, and limits for comprehensive data analysis.Queries can include calculated_fields (derived columns) - see honeycomb_create_derived_column for expression syntax. ",
      "input_schema": {
        "type": "object",
        "properties": {
          "dataset": {
            "type": "string",
            "description": "The dataset slug"
          },
          "annotation_name": {
            "type": "string",
            "description": "Optional name for the query annotation (saves query with a display name)"
          },
          "time_range": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Query time range in seconds",
            "title": "Time Range"
          },
          "start_time": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Absolute start time (Unix timestamp)",
            "title": "Start Time"
          },
          "end_time": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Absolute end time (Unix timestamp)",
            "title": "End Time"
          },
          "granularity": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Time granularity in seconds",
            "title": "Granularity"
          },
          "calculations": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Calculation"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Calculations to perform",
            "title": "Calculations"
          },
          "filters": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Filter"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Query filters",
            "title": "Filters"
          },
          "breakdowns": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Columns to group by",
            "title": "Breakdowns"
          },
          "filter_combination": {
            "anyOf": [
              {
                "$ref": "#/$defs/FilterCombination"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "How to combine filters (AND/OR)",
            "title": "Filter Combination"
          },
          "orders": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Order"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Result ordering",
            "title": "Orders"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Result limit (max 1000 for saved queries, 10K when using disable_series=True)",
            "title": "Limit"
          },
          "havings": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Having"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Having clauses",
            "title": "Havings"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low",
              "none"
            ],
            "description": "Claude's confidence level in this tool call. 'high' = certain this matches user intent and will succeed, 'medium' = likely correct but some uncertainty, 'low' = uncertain but best available option, 'none' = guessing or placeholder value."
          },
          "notes": {
            "type": "object",
            "description": "Structured reasoning notes explaining Claude's decision-making process. All categories are optional arrays of single-sentence strings.",
            "properties": {
              "decisions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Key decisions made (e.g., 'Chose COUNT over AVG for error rate')"
              },
              "concerns": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Potential issues or risks (e.g., 'Time range may be too short')"
              },
              "assumptions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Assumptions being made (e.g., 'Assuming status_code column exists')"
              },
              "questions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Clarifying questions for increased confidence (e.g., 'I would be more confident if I knew the expected error baseline')"
              }
            },
            "additionalProperties": false
          }
        },
        "required": [
          "dataset"
        ],
        "$defs": {
          "CalcOp": {
            "description": "Calculation operations for Honeycomb queries.",
            "enum": [
              "COUNT",
              "SUM",
              "AVG",
              "MIN",
              "MAX",
              "P001",
              "P01",
              "P05",
              "P10",
              "P25",
              "P50",
              "P75",
              "P90",
              "P95",
              "P99",
              "P999",
              "COUNT_DISTINCT",
              "CONCURRENCY",
              "HEATMAP",
              "RATE_AVG",
              "RATE_SUM",
              "RATE_MAX"
            ],
            "title": "CalcOp",
            "type": "string"
          },
          "Calculation": {
            "additionalProperties": false,
            "description": "A calculation in a query.\n\nExamples:\n    >>> Calculation(op=CalcOp.COUNT)\n    >>> Calculation(op=CalcOp.P99, column=\"duration_ms\")\n    >>> Calculation(op=\"AVG\", column=\"response_time\", alias=\"avg_response\")",
            "properties": {
              "op": {
                "$ref": "#/$defs/CalcOp",
                "description": "Calculation operation (COUNT, AVG, P99, etc.)"
              },
              "column": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Column to calculate on",
                "title": "Column"
              },
              "alias": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Alias for the result column",
                "title": "Alias"
              }
            },
            "required": [
              "op"
            ],
            "title": "Calculation",
            "type": "object"
          },
          "Filter": {
            "additionalProperties": false,
            "description": "A filter in a query.\n\nExamples:\n    >>> Filter(column=\"status\", op=FilterOp.EQUALS, value=200)\n    >>> Filter(column=\"error\", op=FilterOp.EXISTS, value=True)\n    >>> Filter(column=\"service\", op=\"in\", value=[\"api\", \"web\"])",
            "properties": {
              "column": {
                "description": "Column to filter on",
                "title": "Column",
                "type": "string"
              },
              "op": {
                "$ref": "#/$defs/FilterOp",
                "description": "Filter operator (=, !=, >, <, contains, etc.)"
              },
              "value": {
                "description": "Filter value",
                "title": "Value"
              }
            },
            "required": [
              "column",
              "op",
              "value"
            ],
            "title": "Filter",
            "type": "object"
          },
          "FilterCombination": {
            "description": "How to combine multiple filters.",
            "enum": [
              "AND",
              "OR"
            ],
            "title": "FilterCombination",
            "type": "string"
          },
          "FilterOp": {
            "description": "Filter operations for Honeycomb queries and board views.",
            "enum": [
              "=",
              "!=",
              ">",
              ">=",
              "<",
              "<=",
              "starts-with",
              "does-not-start-with",
              "ends-with",
              "does-not-end-with",
              "contains",
              "does-not-contain",
              "exists",
              "does-not-exist",
              "in",
              "not-in"
            ],
            "title": "FilterOp",
            "type": "string"
          },
          "Having": {
            "additionalProperties": false,
            "description": "A having clause for post-aggregation filtering.\n\nExamples:\n    >>> Having(calculate_op=CalcOp.COUNT, op=FilterOp.GREATER_THAN, value=100)\n    >>> Having(calculate_op=CalcOp.AVG, column=\"duration_ms\", op=\">\", value=500.0)",
            "properties": {
              "calculate_op": {
                "$ref": "#/$defs/CalcOp",
                "description": "Calculation to filter on"
              },
              "column": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Column for the calculation",
                "title": "Column"
              },
              "op": {
                "$ref": "#/$defs/FilterOp",
                "description": "Comparison operator"
              },
              "value": {
                "description": "Threshold value",
                "title": "Value",
                "type": "number"
              }
            },
            "required": [
              "calculate_op",
              "op",
              "value"
            ],
            "title": "Having",
            "type": "object"
          },
          "Order": {
            "additionalProperties": false,
            "description": "An ordering specification for query results.\n\nExamples:\n    >>> Order(op=CalcOp.COUNT, order=OrderDirection.DESCENDING)\n    >>> Order(op=CalcOp.AVG, column=\"duration_ms\", order=OrderDirection.ASCENDING)",
            "properties": {
              "op": {
                "$ref": "#/$defs/CalcOp",
                "description": "Calculation to order by"
              },
              "column": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Column for the calculation",
                "title": "Column"
              },
              "order": {
                "$ref": "#/$defs/OrderDirection",
                "default": "descending",
                "description": "Sort direction"
              }
            },
            "required": [
              "op"
            ],
            "title": "Order",
            "type": "object"
          },
          "OrderDirection": {
            "description": "Order directions for query results.",
            "enum": [
              "ascending",
              "descending"
            ],
            "title": "OrderDirection",
            "type": "string"
          }
        }
      },
      "input_examples": [
        {
          "dataset": "api-logs",
          "time_range": 3600,
          "calculations": [
            {
              "op": "COUNT"
            }
          ]
        },
        {
          "dataset": "api-logs",
          "time_range": 3600,
          "calculations": [
            {
              "op": "P99",
              "column": "duration_ms"
            }
          ],
          "filters": [
            {
              "column": "status_code",
              "op": ">=",
              "value": 200
            }
          ]
        },
        {
          "dataset": "api-logs",
          "annotation_name": "Error Rate Dashboard",
          "time_range": 7200,
          "calculations": [
            {
              "op": "COUNT"
            }
          ],
          "filters": [
            {
              "column": "status_code",
              "op": ">=",
              "value": 500
            }
          ]
        }
      ]
    },
    {
      "name": "honeycomb_get_query",
      "description": "Retrieves a saved query's configuration by its ID. Use this to inspect an existing query's calculations, filters, time range, and other settings before modifying it or using it as a template. Requires both the dataset slug and query ID parameters. Returns the complete query specification including all calculation definitions, filter conditions, breakdown fields, and ordering rules.",
      "input_schema": {
        "type": "object",
        "properties": {
          "dataset": {
            "type": "string",
            "description": "The dataset slug"
          },
          "query_id": {
            "type": "string",
            "description": "The query ID to retrieve"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low",
              "none"
            ],
            "description": "Claude's confidence level in this tool call. 'high' = certain this matches user intent and will succeed, 'medium' = likely correct but some uncertainty, 'low' = uncertain but best available option, 'none' = guessing or placeholder value."
          },
          "notes": {
            "type": "object",
            "description": "Structured reasoning notes explaining Claude's decision-making process. All categories are optional arrays of single-sentence strings.",
            "properties": {
              "decisions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Key decisions made (e.g., 'Chose COUNT over AVG for error rate')"
              },
              "concerns": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Potential issues or risks (e.g., 'Time range may be too short')"
              },
              "assumptions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Assumptions being made (e.g., 'Assuming status_code column exists')"
              },
              "questions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Clarifying questions for increased confidence (e.g., 'I would be more confident if I knew the expected error baseline')"
              }
            },
            "additionalProperties": false
          }
        },
        "required": [
          "dataset",
          "query_id"
        ]
      },
      "input_examples": [
        {
          "dataset": "api-logs",
          "query_id": "q-123"
        },
        {
          "dataset": "production",
          "query_id": "q-456"
        }
      ]
    },
    {
      "name": "honeycomb_run_query",
      "description": "Creates a saved query, executes it, and returns results with automatic polling until completion. Use this for ad-hoc data analysis, investigating issues, or when you want both a saved query and immediate results in one operation. Requires the dataset slug (or '__all__' for environment-wide queries) and query specification (time_range, calculations, optional filters/breakdowns/orders/havings/limit). This tool performs two operations: first creates a permanent saved query, then executes it with polling and returns the query results including data rows and metadata. Supports all query features including multiple calculations (COUNT, AVG, SUM, MIN, MAX, P50-P99, HEATMAP, RATE_*), complex filters, breakdowns, ordering, HAVING clauses, and result limits.",
      "input_schema": {
        "type": "object",
        "properties": {
          "dataset": {
            "type": "string",
            "description": "The dataset slug"
          },
          "time_range": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Query time range in seconds",
            "title": "Time Range"
          },
          "start_time": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Absolute start time (Unix timestamp)",
            "title": "Start Time"
          },
          "end_time": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Absolute end time (Unix timestamp)",
            "title": "End Time"
          },
          "granularity": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Time granularity in seconds",
            "title": "Granularity"
          },
          "calculations": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Calculation"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Calculations to perform",
            "title": "Calculations"
          },
          "filters": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Filter"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Query filters",
            "title": "Filters"
          },
          "breakdowns": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Columns to group by",
            "title": "Breakdowns"
          },
          "filter_combination": {
            "anyOf": [
              {
                "$ref": "#/$defs/FilterCombination"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "How to combine filters (AND/OR)",
            "title": "Filter Combination"
          },
          "orders": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Order"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Result ordering",
            "title": "Orders"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Result limit (max 1000 for saved queries, 10K when using disable_series=True)",
            "title": "Limit"
          },
          "havings": {
            "anyOf": [
              {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Having"
                    },
                    {
                      "additionalProperties": true,
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Having clauses",
            "title": "Havings"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low",
              "none"
            ],
            "description": "Claude's confidence level in this tool call. 'high' = certain this matches user intent and will succeed, 'medium' = likely correct but some uncertainty, 'low' = uncertain but best available option, 'none' = guessing or placeholder value."
          },
          "notes": {
            "type": "object",
            "description": "Structured reasoning notes explaining Claude's decision-making process. All categories are optional arrays of single-sentence strings.",
            "properties": {
              "decisions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Key decisions made (e.g., 'Chose COUNT over AVG for error rate')"
              },
              "concerns": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Potential issues or risks (e.g., 'Time range may be too short')"
              },
              "assumptions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Assumptions being made (e.g., 'Assuming status_code column exists')"
              },
              "questions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Clarifying questions for increased confidence (e.g., 'I would be more confident if I knew the expected error baseline')"
              }
            },
            "additionalProperties": false
          }
        },
        "required": [
          "dataset"
        ],
        "$defs": {
          "CalcOp": {
            "description": "Calculation operations for Honeycomb queries.",
            "enum": [
              "COUNT",
              "SUM",
              "AVG",
              "MIN",
              "MAX",
              "P001",
              "P01",
              "P05",
              "P10",
              "P25",
              "P50",
              "P75",
              "P90",
              "P95",
              "P99",
              "P999",
              "COUNT_DISTINCT",
              "CONCURRENCY",
              "HEATMAP",
              "RATE_AVG",
              "RATE_SUM",
              "RATE_MAX"
            ],
            "title": "CalcOp",
            "type": "string"
          },
          "Calculation": {
            "additionalProperties": false,
            "description": "A calculation in a query.\n\nExamples:\n    >>> Calculation(op=CalcOp.COUNT)\n    >>> Calculation(op=CalcOp.P99, column=\"duration_ms\")\n    >>> Calculation(op=\"AVG\", column=\"response_time\", alias=\"avg_response\")",
            "properties": {
              "op": {
                "$ref": "#/$defs/CalcOp",
                "description": "Calculation operation (COUNT, AVG, P99, etc.)"
              },
              "column": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Column to calculate on",
                "title": "Column"
              },
              "alias": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Alias for the result column",
                "title": "Alias"
              }
            },
            "required": [
              "op"
            ],
            "title": "Calculation",
            "type": "object"
          },
          "Filter": {
            "additionalProperties": false,
            "description": "A filter in a query.\n\nExamples:\n    >>> Filter(column=\"status\", op=FilterOp.EQUALS, value=200)\n    >>> Filter(column=\"error\", op=FilterOp.EXISTS, value=True)\n    >>> Filter(column=\"service\", op=\"in\", value=[\"api\", \"web\"])",
            "properties": {
              "column": {
                "description": "Column to filter on",
                "title": "Column",
                "type": "string"
              },
              "op": {
                "$ref": "#/$defs/FilterOp",
                "description": "Filter operator (=, !=, >, <, contains, etc.)"
              },
              "value": {
                "description": "Filter value",
                "title": "Value"
              }
            },
            "required": [
              "column",
              "op",
              "value"
            ],
            "title": "Filter",
            "type": "object"
          },
          "FilterCombination": {
            "description": "How to combine multiple filters.",
            "enum": [
              "AND",
              "OR"
            ],
            "title": "FilterCombination",
            "type": "string"
          },
          "FilterOp": {
            "description": "Filter operations for Honeycomb queries and board views.",
            "enum": [
              "=",
              "!=",
              ">",
              ">=",
              "<",
              "<=",
              "starts-with",
              "does-not-start-with",
              "ends-with",
              "does-not-end-with",
              "contains",
              "does-not-contain",
              "exists",
              "does-not-exist",
              "in",
              "not-in"
            ],
            "title": "FilterOp",
            "type": "string"
          },
          "Having": {
            "additionalProperties": false,
            "description": "A having clause for post-aggregation filtering.\n\nExamples:\n    >>> Having(calculate_op=CalcOp.COUNT, op=FilterOp.GREATER_THAN, value=100)\n    >>> Having(calculate_op=CalcOp.AVG, column=\"duration_ms\", op=\">\", value=500.0)",
            "properties": {
              "calculate_op": {
                "$ref": "#/$defs/CalcOp",
                "description": "Calculation to filter on"
              },
              "column": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Column for the calculation",
                "title": "Column"
              },
              "op": {
                "$ref": "#/$defs/FilterOp",
                "description": "Comparison operator"
              },
              "value": {
                "description": "Threshold value",
                "title": "Value",
                "type": "number"
              }
            },
            "required": [
              "calculate_op",
              "op",
              "value"
            ],
            "title": "Having",
            "type": "object"
          },
          "Order": {
            "additionalProperties": false,
            "description": "An ordering specification for query results.\n\nExamples:\n    >>> Order(op=CalcOp.COUNT, order=OrderDirection.DESCENDING)\n    >>> Order(op=CalcOp.AVG, column=\"duration_ms\", order=OrderDirection.ASCENDING)",
            "properties": {
              "op": {
                "$ref": "#/$defs/CalcOp",
                "description": "Calculation to order by"
              },
              "column": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Column for the calculation",
                "title": "Column"
              },
              "order": {
                "$ref": "#/$defs/OrderDirection",
                "default": "descending",
                "description": "Sort direction"
              }
            },
            "required": [
              "op"
            ],
            "title": "Order",
            "type": "object"
          },
          "OrderDirection": {
            "description": "Order directions for query results.",
            "enum": [
              "ascending",
              "descending"
            ],
            "title": "OrderDirection",
            "type": "string"
          }
        }
      },
      "input_examples": [
        {
          "dataset": "api-logs",
          "time_range": 3600,
          "calculations": [
            {
              "op": "COUNT"
            }
          ]
        },
        {
          "dataset": "api-logs",
          "time_range": 7200,
          "calculations": [
            {
              "op": "P99",
              "column": "duration_ms"
            }
          ],
          "breakdowns": [
            "endpoint"
          ]
        },
        {
          "dataset": "api-logs",
          "time_range": 3600,
          "calculations": [
            {
              "op": "COUNT"
            },
            {
              "op": "AVG",
              "column": "duration_ms"
            },
            {
              "op": "P99",
              "column": "duration_ms"
            }
          ],
          "filters": [
            {
              "column": "status_code",
              "op": ">=",
              "value": 500
            }
          ],
          "orders": [
            {
              "column": "COUNT",
              "order": "descending"
            }
          ],
          "limit": 100
        }
      ]
    }
  ],
  "version": "0.1.0",
  "generated_at": "2026-01-08T05:25:00.419432+00:00",
  "count": 3
}